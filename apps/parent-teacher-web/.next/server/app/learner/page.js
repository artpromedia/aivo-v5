(()=>{var e={};e.id=380,e.ids=[380],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6449:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(738),s(8154),s(971);var r=s(1341),a=s(8711),n=s(1476),i=s.n(n),l=s(6915),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["learner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,738)),"C:\\Users\\ofema\\Aivo-v5.1\\apps\\parent-teacher-web\\app\\learner\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8154)),"C:\\Users\\ofema\\Aivo-v5.1\\apps\\parent-teacher-web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,971,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\ofema\\Aivo-v5.1\\apps\\parent-teacher-web\\app\\learner\\page.tsx"],x="/learner/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/learner/page",pathname:"/learner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},873:(e,t,s)=>{Promise.resolve().then(s.bind(s,2976))},8265:(e,t,s)=>{Promise.resolve().then(s.bind(s,6802))},7879:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,498,23)),Promise.resolve().then(s.t.bind(s,5662,23)),Promise.resolve().then(s.t.bind(s,6642,23)),Promise.resolve().then(s.t.bind(s,7217,23)),Promise.resolve().then(s.t.bind(s,2828,23)),Promise.resolve().then(s.t.bind(s,5761,23))},2976:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o,a:()=>c});var r=s(9731),a=s(7868),n=s(4724);let i=(0,a.createContext)(void 0),l=e=>(function(e){let t=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000";return new n.A(t,e)})(e),o=({children:e})=>{let[t,s]=(0,a.useState)({accessToken:null,user:null});(0,a.useEffect)(()=>{s({accessToken:null,user:null})},[]);let n=l((0,a.useCallback)(async()=>t.accessToken,[t.accessToken])),o=async(e,t)=>{let r=await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000"}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error(await r.text()||"Login failed");let a=await r.json();s({accessToken:a.accessToken,user:a.user})};return r.jsx(i.Provider,{value:{state:t,apiClient:n,login:o,logout:()=>{s({accessToken:null,user:null})}},children:e})};function c(){let e=(0,a.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},6802:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(9731),a=s(7868),n=s(5822);let i=new(s(4724)).A("http://localhost:4000");function l(){let e=(0,n.useSearchParams)().get("learnerId")??"demo-learner",[t,s]=(0,a.useState)(null),[l,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(null);async function v(){d(!0),m(null);try{let t=await i.getCaregiverLearnerOverview(e);s(t.overview)}catch(e){m(e.message)}finally{d(!1)}}async function N(){u(!0),f(null);try{let e=await i.listNotifications();o(e.notifications)}catch(e){f(e.message)}finally{u(!1)}}async function P(e,t){g(e);try{await i.decideOnDifficultyProposal({proposalId:e,approve:t}),await v(),await N()}catch(e){m(e.message)}finally{g(null)}}async function w(e){j(e);try{await i.markNotificationRead(e),await N()}catch(e){f(e.message)}finally{j(null)}}let S=t?.learner.displayName??"Your learner";return r.jsx("main",{className:"min-h-screen bg-slate-950 text-slate-50 flex items-center justify-center p-6",children:(0,r.jsxs)("section",{className:"w-full max-w-6xl grid gap-6 lg:grid-cols-[2fr,1.2fr]",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("header",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 flex justify-between items-start gap-3",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-xl font-semibold",children:[S,"'s Learning Overview"]}),r.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"See how AIVO is supporting your learner and approve any difficulty changes."}),t&&(0,r.jsxs)("p",{className:"text-[11px] text-slate-400 mt-1",children:["Current grade: ",t.learner.currentGrade," \0b7 Region: "," ",t.learner.region]})]})}),c&&r.jsx("div",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 text-xs text-slate-300",children:"Loading learner overview\x1a\x1a"}),p&&(0,r.jsxs)("div",{className:"rounded-2xl bg-red-900/40 border border-red-700 p-3 text-xs text-red-100",children:["Error: ",p]}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Subjects & Levels"}),r.jsx("p",{className:"text-[11px] text-slate-300 mb-3",children:"AIVO compares enrolled grade with functional level to gently adjust difficulty."}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:t.subjects.map(e=>(0,r.jsxs)("article",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-xs text-slate-200 mt-0.5",children:["Enrolled grade: "," ",r.jsx("span",{className:"font-semibold",children:e.enrolledGrade})]}),(0,r.jsxs)("p",{className:"text-xs text-slate-200",children:["Working level: "," ",(0,r.jsxs)("span",{className:"font-semibold",children:["Grade ",e.assessedGradeLevel]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] text-slate-400",children:"Mastery"}),(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[(100*e.masteryScore).toFixed(0),"%"]})]})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[r.jsx("p",{className:"text-[10px] text-slate-400",children:"AIVO suggestion:"}),r.jsx("span",{className:`text-[10px] font-semibold rounded-pill px-2 py-0.5 ${"harder"===e.difficultyRecommendation?"bg-emerald-500/20 text-emerald-300":"easier"===e.difficultyRecommendation?"bg-amber-500/20 text-amber-300":"bg-slate-700/40 text-slate-200"}`,children:e.difficultyRecommendation?e.difficultyRecommendation.toUpperCase():"MAINTAIN"})]})]},e.subject))})]}),(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Baseline Summary"}),t.lastBaselineSummary?(0,r.jsxs)(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-slate-200",children:t.lastBaselineSummary.notes}),r.jsx("ul",{className:"mt-2 grid gap-2 md:grid-cols-2",children:t.lastBaselineSummary.subjectLevels.map(e=>(0,r.jsxs)("li",{className:"text-[11px] text-slate-300",children:[r.jsx("span",{className:"font-semibold",children:e.subject.toUpperCase()})," \x13 ","enrolled ",e.enrolledGrade,", working at grade ",e.assessedGradeLevel]},e.subject))})]}):r.jsx("p",{className:"text-xs text-slate-400",children:"No baseline summary is available yet."})]}),(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Difficulty Approvals"}),0===t.pendingDifficultyProposals.length?r.jsx("p",{className:"text-xs text-slate-400",children:"There are no difficulty changes waiting for your approval."}):r.jsx("ul",{className:"space-y-3",children:t.pendingDifficultyProposals.map(e=>(0,r.jsxs)("li",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-xs text-slate-200",children:["Change difficulty "," ",r.jsx("span",{className:"font-semibold",children:"harder"===e.direction?"UP":"DOWN"})," ","from grade ",e.fromAssessedGradeLevel," to ",e.toAssessedGradeLevel]}),(0,r.jsxs)("p",{className:"mt-1 text-[11px] text-slate-300",children:["Reason: ",e.rationale]})]}),r.jsx("span",{className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 bg-amber-500/20 text-amber-300",children:"PENDING"})]}),(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{type:"button",disabled:b===e.id,onClick:()=>P(e.id,!0),className:"flex-1 rounded-pill bg-emerald-500 px-3 py-1.5 text-[11px] font-semibold text-slate-950 disabled:opacity-60",children:b===e.id?"Approving\x1a\x1a":"Approve"}),r.jsx("button",{type:"button",disabled:b===e.id,onClick:()=>P(e.id,!1),className:"flex-1 rounded-pill bg-red-500 px-3 py-1.5 text-[11px] font-semibold text-slate-50 disabled:opacity-60",children:b===e.id?"Rejecting\x1a\x1a":"Reject"})]})]},e.id))})]})]})]}),(0,r.jsxs)("aside",{className:"space-y-4",children:[(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Notifications"}),x&&r.jsx("p",{className:"text-[11px] text-slate-400",children:"Loading notifications\x1a\x1a"}),h&&(0,r.jsxs)("p",{className:"text-[11px] text-red-300 mb-1",children:["Error: ",h]}),0===l.length&&!x&&r.jsx("p",{className:"text-xs text-slate-400",children:"You don't have any notifications yet."}),r.jsx("ul",{className:"space-y-2",children:l.map(e=>(0,r.jsxs)("li",{className:`rounded-xl border p-3 text-xs ${"unread"===e.status?"bg-slate-950/80 border-coral/50":"bg-slate-950/60 border-slate-800"}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-[11px] font-semibold text-slate-50",children:e.title}),r.jsx("p",{className:"text-[11px] text-slate-300 mt-0.5",children:e.body})]}),r.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[r.jsx("p",{className:"text-[10px] text-slate-400 capitalize",children:e.type.replace("_"," ")}),"unread"===e.status&&r.jsx("button",{type:"button",disabled:y===e.id,onClick:()=>w(e.id),className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 bg-slate-800 text-slate-100 disabled:opacity-60",children:y===e.id?"Marking\x1a\x1a":"Mark as read"})]})]},e.id))})]}),t&&(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold mb-2",children:"Recent Activity"}),0===t.recentSessionDates.length?r.jsx("p",{className:"text-xs text-slate-400",children:"No recent sessions yet. AIVO will suggest gentle practice when your learner starts."}):r.jsx("ul",{className:"space-y-1 text-xs text-slate-300",children:t.recentSessionDates.map(e=>r.jsx("li",{children:e},e))})]})]})]})})}function o(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:"Loading learner overview..."}),children:r.jsx(l,{})})}},5822:(e,t,s)=>{"use strict";var r=s(7959);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},4724:(e,t)=>{"use strict";t.A=void 0;class s{constructor(e,t){this.baseUrl=e,this.getToken=t}async request(e,t={}){let s=this.getToken?await this.getToken():null,r=await fetch(`${this.baseUrl}${e}`,{...t,headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...t.headers||{}}});if(!r.ok){let e=await r.text();throw Error(`API error ${r.status}: ${e}`)}return r.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request(`/learners/${e}`)}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request(`/difficulty/proposals/${e.proposalId}/decision`,{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request(`/difficulty/proposals?${t.toString()}`)}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request(`/admin/tenants/${e}`)}listDistricts(e){return this.request(`/admin/tenants/${e}/districts`)}listSchools(e,t){let s=new URLSearchParams({...t?{districtId:t}:{}}).toString(),r=s?`?${s}`:"";return this.request(`/admin/tenants/${e}/schools${r}`)}listRoleAssignments(e){return this.request(`/admin/tenants/${e}/roles`)}getTodaySession(e,t){let s=new URLSearchParams({learnerId:e,subject:t});return this.request(`/sessions/today?${s.toString()}`)}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request(`/sessions/${e.sessionId}/activities/${e.activityId}`,{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request(`/caregiver/learners/${e}/overview`)}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request(`/caregiver/notifications/${e}/read`,{method:"POST"})}getLearnerAnalytics(e){return this.request(`/analytics/learners/${e}`)}getTenantAnalytics(e){return this.request(`/analytics/tenants/${e}`)}}t.A=s},8154:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(8661),a=s(8208);let n=(0,a.createProxy)(String.raw`C:\Users\ofema\Aivo-v5.1\apps\parent-teacher-web\app\AuthProvider.tsx`),{__esModule:i,$$typeof:l}=n;n.default;let o=(0,a.createProxy)(String.raw`C:\Users\ofema\Aivo-v5.1\apps\parent-teacher-web\app\AuthProvider.tsx#AuthProvider`);function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(o,{children:e})})})}(0,a.createProxy)(String.raw`C:\Users\ofema\Aivo-v5.1\apps\parent-teacher-web\app\AuthProvider.tsx#useAuth`)},738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var r=s(8208);let a=(0,r.createProxy)(String.raw`C:\Users\ofema\Aivo-v5.1\apps\parent-teacher-web\app\learner\page.tsx`),{__esModule:n,$$typeof:i}=a;a.default;let l=(0,r.createProxy)(String.raw`C:\Users\ofema\Aivo-v5.1\apps\parent-teacher-web\app\learner\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[228],()=>s(6449));module.exports=r})();