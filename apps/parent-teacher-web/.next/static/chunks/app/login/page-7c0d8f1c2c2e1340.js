(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{5125:function(e,t,r){Promise.resolve().then(r.bind(r,888))},588:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return d}});var s=r(266),n=r(1076),a=r(5699),o=r(2014);let i="aivo_auth_state",c=(0,n.createContext)(void 0),u=e=>(function(e){let t=o.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000";return new a.A(t,e)})(e),l=e=>{let{children:t}=e,[r,a]=(0,n.useState)({accessToken:null,user:null});(0,n.useEffect)(()=>{a(function(){try{let e=window.localStorage.getItem(i);if(!e)return{accessToken:null,user:null};return JSON.parse(e)}catch(e){return{accessToken:null,user:null}}}())},[]);let l=u((0,n.useCallback)(async()=>r.accessToken,[r.accessToken])),d=async(e,t)=>{let r=await fetch("".concat(o.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error(await r.text()||"Login failed");let s=await r.json(),n={accessToken:s.accessToken,user:s.user};a(n),window.localStorage.setItem(i,JSON.stringify(n))};return(0,s.jsx)(c.Provider,{value:{state:r,apiClient:l,login:d,logout:()=>{a({accessToken:null,user:null}),window.localStorage.removeItem(i)}},children:t})};function d(){let e=(0,n.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},888:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(266),n=r(1076),a=r(588),o=r(4275);function i(){let{login:e,state:t}=(0,a.a)(),r=(0,o.useRouter)(),[i,c]=(0,n.useState)("parent@example.com"),[u,l]=(0,n.useState)("dev-password"),[d,h]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1);async function p(t){t.preventDefault(),h(null),m(!0);try{await e(i,u),r.push("/learner")}catch(e){h(e.message)}finally{m(!1)}}return t.user?(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:(0,s.jsxs)("p",{className:"text-sm",children:["You are already logged in as ",(0,s.jsx)("span",{className:"font-semibold",children:t.user.email}),"."]})}):(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50 p-6",children:(0,s.jsxs)("section",{className:"w-full max-w-sm rounded-2xl bg-slate-900/80 border border-slate-800 shadow-soft-coral p-5 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"Sign in"}),(0,s.jsx)("p",{className:"text-xs text-slate-300 mt-1",children:"Use a demo parent or teacher account to access the caregiver dashboard."})]}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-[11px] text-slate-300",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{id:"email",className:"w-full rounded-xl bg-slate-950/80 border border-slate-700 px-3 py-2 text-xs text-slate-50 focus:outline-none focus:ring-2 focus:ring-coral",value:i,onChange:e=>c(e.target.value),autoComplete:"email"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-[11px] text-slate-300",htmlFor:"password",children:"Password (dev)"}),(0,s.jsx)("input",{id:"password",type:"password",className:"w-full rounded-xl bg-slate-950/80 border border-slate-700 px-3 py-2 text-xs text-slate-50 focus:outline-none focus:ring-2 focus:ring-coral",value:u,onChange:e=>l(e.target.value),autoComplete:"current-password"})]}),d&&(0,s.jsx)("p",{className:"text-[11px] text-red-400",children:d}),(0,s.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-pill bg-coral px-4 py-2 text-xs font-semibold text-white disabled:opacity-60",children:f?"Signing inâ€¦":"Sign in"})]})]})})}},4275:function(e,t,r){"use strict";var s=r(8138);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},2014:function(e,t,r){"use strict";var s,n;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(6946)},6946:function(e){!function(){var t={229:function(e){var t,r,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},o=!0;try{t[e](a,a.exports,s),o=!1}finally{o&&delete r[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()},5699:function(e,t){"use strict";t.A=void 0;class r{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken?await this.getToken():null,s=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",...r?{Authorization:"Bearer ".concat(r)}:{},...t.headers||{}}});if(!s.ok){let e=await s.text();throw Error("API error ".concat(s.status,": ").concat(e))}return s.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request("/learners/".concat(e))}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request("/difficulty/proposals/".concat(e.proposalId,"/decision"),{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request("/difficulty/proposals?".concat(t.toString()))}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request("/admin/tenants/".concat(e))}listDistricts(e){return this.request("/admin/tenants/".concat(e,"/districts"))}listSchools(e,t){let r=new URLSearchParams({...t?{districtId:t}:{}}).toString();return this.request("/admin/tenants/".concat(e,"/schools").concat(r?"?".concat(r):""))}listRoleAssignments(e){return this.request("/admin/tenants/".concat(e,"/roles"))}getTodaySession(e,t){let r=new URLSearchParams({learnerId:e,subject:t});return this.request("/sessions/today?".concat(r.toString()))}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request("/sessions/".concat(e.sessionId,"/activities/").concat(e.activityId),{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request("/caregiver/learners/".concat(e,"/overview"))}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request("/caregiver/notifications/".concat(e,"/read"),{method:"POST"})}getLearnerAnalytics(e){return this.request("/analytics/learners/".concat(e))}getTenantAnalytics(e){return this.request("/analytics/tenants/".concat(e))}constructor(e,t){this.baseUrl=e,this.getToken=t}}t.A=r}},function(e){e.O(0,[321,985,744],function(){return e(e.s=5125)}),_N_E=e.O()}]);