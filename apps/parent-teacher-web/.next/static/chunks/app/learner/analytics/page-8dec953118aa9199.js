(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{6095:function(e,t,s){Promise.resolve().then(s.bind(s,5978))},588:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return u},a:function(){return d}});var r=s(266),n=s(1076),a=s(5699),i=s(2014);let l="aivo_auth_state",c=(0,n.createContext)(void 0),o=e=>(function(e){let t=i.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000";return new a.A(t,e)})(e),u=e=>{let{children:t}=e,[s,a]=(0,n.useState)({accessToken:null,user:null});(0,n.useEffect)(()=>{a(function(){try{let e=window.localStorage.getItem(l);if(!e)return{accessToken:null,user:null};return JSON.parse(e)}catch(e){return{accessToken:null,user:null}}}())},[]);let u=o((0,n.useCallback)(async()=>s.accessToken,[s.accessToken])),d=async(e,t)=>{let s=await fetch("".concat(i.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!s.ok)throw Error(await s.text()||"Login failed");let r=await s.json(),n={accessToken:r.accessToken,user:r.user};a(n),window.localStorage.setItem(l,JSON.stringify(n))};return(0,r.jsx)(c.Provider,{value:{state:s,apiClient:u,login:d,logout:()=>{a({accessToken:null,user:null}),window.localStorage.removeItem(l)}},children:t})};function d(){let e=(0,n.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},5978:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(266),n=s(1076),a=s(588);function i(){let{apiClient:e,state:t}=(0,a.a)(),[s,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1),[o,u]=(0,n.useState)(null);return((0,n.useEffect)(()=>{t.user&&(c(!0),u(null),e.getLearnerAnalytics("demo-learner").then(e=>i(e.analytics)).catch(e=>u(e.message)).finally(()=>c(!1)))},[e,t.user]),t.user)?(0,r.jsx)("main",{className:"min-h-screen bg-slate-950 text-slate-50 flex items-center justify-center p-6",children:(0,r.jsxs)("section",{className:"w-full max-w-5xl space-y-4",children:[(0,r.jsx)("header",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 flex justify-between items-start gap-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Progress & Insights"}),(0,r.jsx)("p",{className:"text-xs text-slate-300 mt-1",children:"Understand how AIVO sees your learner's progress and why it suggests certain difficulty levels."})]})}),l&&(0,r.jsx)("div",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 text-xs text-slate-300",children:"Loading analytics…"}),o&&(0,r.jsxs)("div",{className:"rounded-2xl bg-red-900/40 border border-red-700 p-3 text-xs text-red-100",children:["Error: ",o]}),s&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-[1.6fr,1.4fr]",children:[(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 space-y-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Subject Progress"}),(0,r.jsx)("p",{className:"text-[11px] text-slate-300",children:"Each subject shows how mastery and difficulty have changed over time."}),(0,r.jsx)("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:s.subjects.map(e=>(0,r.jsxs)("article",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-[11px] text-slate-300",children:["Enrolled grade: ",(0,r.jsx)("span",{className:"font-semibold",children:e.enrolledGrade})," ","• Working level: ",(0,r.jsxs)("span",{className:"font-semibold",children:["Grade ",e.currentAssessedGradeLevel]})]})]})}),0===e.timeseries.length?(0,r.jsx)("p",{className:"text-[11px] text-slate-500",children:"No practice data yet; AIVO will build this view as your learner engages."}):(0,r.jsx)("ul",{className:"space-y-1 text-[11px] text-slate-300",children:e.timeseries.map(t=>(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:t.date}),(0,r.jsxs)("span",{children:["Mastery: ",(100*t.masteryScore).toFixed(0),"% • Minutes: ",t.minutesPracticed," • Level: ",t.difficultyLevel]})]},"".concat(e.subject,"-").concat(t.date)))})]},e.subject))})]}),(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 space-y-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Why AIVO Chooses This Difficulty"}),(0,r.jsx)("p",{className:"text-[11px] text-slate-300",children:"AIVO tries to be gentle and predictable. Here's how it explains its difficulty choices."}),(0,r.jsxs)("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:[s.difficultySummaries.map(e=>(0,r.jsxs)("article",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between items-start gap-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-[11px] text-slate-200 mt-1",children:["Current level: grade ",(0,r.jsx)("span",{className:"font-semibold",children:e.currentDifficultyLevel})," • ","Target (when ready): grade ",(0,r.jsx)("span",{className:"font-semibold",children:e.targetDifficultyLevel})]}),(0,r.jsx)("p",{className:"text-[11px] text-slate-300 mt-1",children:e.rationale})]})}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400 mb-1",children:"AIVO considers:"}),(0,r.jsx)("ul",{className:"space-y-1",children:e.factors.map(e=>(0,r.jsxs)("li",{className:"flex justify-between gap-2 text-[11px] text-slate-300",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.label}),(0,r.jsx)("span",{className:"text-slate-400 flex-1 text-right",children:e.description})]},e.label))})]})]},e.subject)),0===s.difficultySummaries.length&&(0,r.jsx)("p",{className:"text-[11px] text-slate-400",children:"AIVO doesn't have enough data yet to explain difficulty choices. Once baseline and sessions are recorded, you'll see detailed reasons here."})]})]})]})]})}):(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:(0,r.jsxs)("p",{className:"text-sm",children:["Please sign in to view learner progress. Go to ",(0,r.jsx)("span",{className:"font-mono",children:"/login"}),"."]})})}},2014:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(6946)},6946:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var c=[],o=!1,u=-1;function d(){o&&r&&(o=!1,r.length?c=r.concat(c):u=-1,c.length&&h())}function h(){if(!o){var e=l(d);o=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new f(e,t)),1!==c.length||o||l(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete s[e]}return a.exports}r.ab="//";var n=r(229);e.exports=n}()},5699:function(e,t){"use strict";t.A=void 0;class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken?await this.getToken():null,r=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers||{}}});if(!r.ok){let e=await r.text();throw Error("API error ".concat(r.status,": ").concat(e))}return r.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request("/learners/".concat(e))}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request("/difficulty/proposals/".concat(e.proposalId,"/decision"),{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request("/difficulty/proposals?".concat(t.toString()))}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request("/admin/tenants/".concat(e))}listDistricts(e){return this.request("/admin/tenants/".concat(e,"/districts"))}listSchools(e,t){let s=new URLSearchParams({...t?{districtId:t}:{}}).toString();return this.request("/admin/tenants/".concat(e,"/schools").concat(s?"?".concat(s):""))}listRoleAssignments(e){return this.request("/admin/tenants/".concat(e,"/roles"))}getTodaySession(e,t){let s=new URLSearchParams({learnerId:e,subject:t});return this.request("/sessions/today?".concat(s.toString()))}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request("/sessions/".concat(e.sessionId,"/activities/").concat(e.activityId),{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request("/caregiver/learners/".concat(e,"/overview"))}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request("/caregiver/notifications/".concat(e,"/read"),{method:"POST"})}getLearnerAnalytics(e){return this.request("/analytics/learners/".concat(e))}getTenantAnalytics(e){return this.request("/analytics/tenants/".concat(e))}constructor(e,t){this.baseUrl=e,this.getToken=t}}t.A=s}},function(e){e.O(0,[321,985,744],function(){return e(e.s=6095)}),_N_E=e.O()}]);