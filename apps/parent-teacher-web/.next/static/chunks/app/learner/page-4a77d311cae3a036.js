(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{1606:function(e,t,s){Promise.resolve().then(s.bind(s,610))},610:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(266),a=s(1076),n=s(4275),i=s(5699),l=s(2014);let c=new i.A(l.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000");function o(){var e,t;let s=null!==(e=(0,n.useSearchParams)().get("learnerId"))&&void 0!==e?e:"demo-learner",[i,l]=(0,a.useState)(null),[o,d]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),[y,j]=(0,a.useState)(null),[N,v]=(0,a.useState)(null);async function S(){x(!0),f(null);try{let e=await c.getCaregiverLearnerOverview(s);l(e.overview)}catch(e){f(e.message)}finally{x(!1)}}async function w(){h(!0),g(null);try{let e=await c.listNotifications();d(e.notifications)}catch(e){g(e.message)}finally{h(!1)}}async function T(e,t){j(e);try{await c.decideOnDifficultyProposal({proposalId:e,approve:t}),await S(),await w()}catch(e){f(e.message)}finally{j(null)}}async function O(e){v(e);try{await c.markNotificationRead(e),await w()}catch(e){g(e.message)}finally{v(null)}}(0,a.useEffect)(()=>{S(),w()},[s]);let P=null!==(t=null==i?void 0:i.learner.displayName)&&void 0!==t?t:"Your learner";return(0,r.jsx)("main",{className:"min-h-screen bg-slate-950 text-slate-50 flex items-center justify-center p-6",children:(0,r.jsxs)("section",{className:"w-full max-w-6xl grid gap-6 lg:grid-cols-[2fr,1.2fr]",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("header",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 flex justify-between items-start gap-3",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-xl font-semibold",children:[P,"'s Learning Overview"]}),(0,r.jsx)("p",{className:"text-xs text-slate-300 mt-1",children:"See how AIVO is supporting your learner and approve any difficulty changes."}),i&&(0,r.jsxs)("p",{className:"text-[11px] text-slate-400 mt-1",children:["Current grade: ",i.learner.currentGrade," \0b7 Region: "," ",i.learner.region]})]})}),u&&(0,r.jsx)("div",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4 text-xs text-slate-300",children:"Loading learner overview\x1a\x1a"}),p&&(0,r.jsxs)("div",{className:"rounded-2xl bg-red-900/40 border border-red-700 p-3 text-xs text-red-100",children:["Error: ",p]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Subjects & Levels"}),(0,r.jsx)("p",{className:"text-[11px] text-slate-300 mb-3",children:"AIVO compares enrolled grade with functional level to gently adjust difficulty."}),(0,r.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:i.subjects.map(e=>(0,r.jsxs)("article",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-xs text-slate-200 mt-0.5",children:["Enrolled grade: "," ",(0,r.jsx)("span",{className:"font-semibold",children:e.enrolledGrade})]}),(0,r.jsxs)("p",{className:"text-xs text-slate-200",children:["Working level: "," ",(0,r.jsxs)("span",{className:"font-semibold",children:["Grade ",e.assessedGradeLevel]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:"Mastery"}),(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[(100*e.masteryScore).toFixed(0),"%"]})]})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400",children:"AIVO suggestion:"}),(0,r.jsx)("span",{className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 ".concat("harder"===e.difficultyRecommendation?"bg-emerald-500/20 text-emerald-300":"easier"===e.difficultyRecommendation?"bg-amber-500/20 text-amber-300":"bg-slate-700/40 text-slate-200"),children:e.difficultyRecommendation?e.difficultyRecommendation.toUpperCase():"MAINTAIN"})]})]},e.subject))})]}),(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Baseline Summary"}),i.lastBaselineSummary?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-xs text-slate-200",children:i.lastBaselineSummary.notes}),(0,r.jsx)("ul",{className:"mt-2 grid gap-2 md:grid-cols-2",children:i.lastBaselineSummary.subjectLevels.map(e=>(0,r.jsxs)("li",{className:"text-[11px] text-slate-300",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.subject.toUpperCase()})," \x13 ","enrolled ",e.enrolledGrade,", working at grade ",e.assessedGradeLevel]},e.subject))})]}):(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"No baseline summary is available yet."})]}),(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Difficulty Approvals"}),0===i.pendingDifficultyProposals.length?(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"There are no difficulty changes waiting for your approval."}):(0,r.jsx)("ul",{className:"space-y-3",children:i.pendingDifficultyProposals.map(e=>(0,r.jsxs)("li",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.subject.toUpperCase()}),(0,r.jsxs)("p",{className:"text-xs text-slate-200",children:["Change difficulty "," ",(0,r.jsx)("span",{className:"font-semibold",children:"harder"===e.direction?"UP":"DOWN"})," ","from grade ",e.fromAssessedGradeLevel," to ",e.toAssessedGradeLevel]}),(0,r.jsxs)("p",{className:"mt-1 text-[11px] text-slate-300",children:["Reason: ",e.rationale]})]}),(0,r.jsx)("span",{className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 bg-amber-500/20 text-amber-300",children:"PENDING"})]}),(0,r.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,r.jsx)("button",{type:"button",disabled:y===e.id,onClick:()=>T(e.id,!0),className:"flex-1 rounded-pill bg-emerald-500 px-3 py-1.5 text-[11px] font-semibold text-slate-950 disabled:opacity-60",children:y===e.id?"Approving\x1a\x1a":"Approve"}),(0,r.jsx)("button",{type:"button",disabled:y===e.id,onClick:()=>T(e.id,!1),className:"flex-1 rounded-pill bg-red-500 px-3 py-1.5 text-[11px] font-semibold text-slate-50 disabled:opacity-60",children:y===e.id?"Rejecting\x1a\x1a":"Reject"})]})]},e.id))})]})]})]}),(0,r.jsxs)("aside",{className:"space-y-4",children:[(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Notifications"}),m&&(0,r.jsx)("p",{className:"text-[11px] text-slate-400",children:"Loading notifications\x1a\x1a"}),b&&(0,r.jsxs)("p",{className:"text-[11px] text-red-300 mb-1",children:["Error: ",b]}),0===o.length&&!m&&(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"You don't have any notifications yet."}),(0,r.jsx)("ul",{className:"space-y-2",children:o.map(e=>(0,r.jsxs)("li",{className:"rounded-xl border p-3 text-xs ".concat("unread"===e.status?"bg-slate-950/80 border-coral/50":"bg-slate-950/60 border-slate-800"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold text-slate-50",children:e.title}),(0,r.jsx)("p",{className:"text-[11px] text-slate-300 mt-0.5",children:e.body})]}),(0,r.jsx)("span",{className:"text-[10px] text-slate-400",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,r.jsx)("p",{className:"text-[10px] text-slate-400 capitalize",children:e.type.replace("_"," ")}),"unread"===e.status&&(0,r.jsx)("button",{type:"button",disabled:N===e.id,onClick:()=>O(e.id),className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 bg-slate-800 text-slate-100 disabled:opacity-60",children:N===e.id?"Marking\x1a\x1a":"Mark as read"})]})]},e.id))})]}),i&&(0,r.jsxs)("section",{className:"rounded-2xl bg-slate-900/80 border border-slate-800 p-4",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Recent Activity"}),0===i.recentSessionDates.length?(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"No recent sessions yet. AIVO will suggest gentle practice when your learner starts."}):(0,r.jsx)("ul",{className:"space-y-1 text-xs text-slate-300",children:i.recentSessionDates.map(e=>(0,r.jsx)("li",{children:e},e))})]})]})]})})}function d(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:"Loading learner overview..."}),children:(0,r.jsx)(o,{})})}},4275:function(e,t,s){"use strict";var r=s(8138);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},2014:function(e,t,s){"use strict";var r,a;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(6946)},6946:function(e){!function(){var t={229:function(e){var t,s,r,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var c=[],o=!1,d=-1;function u(){o&&r&&(o=!1,r.length?c=r.concat(c):d=-1,c.length&&x())}function x(){if(!o){var e=l(u);o=!0;for(var t=c.length;t;){for(r=c,c=[];++d<t;)r&&r[d].run();d=-1,t=c.length}r=null,o=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new m(e,t)),1!==c.length||o||l(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function r(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}},i=!0;try{t[e](n,n.exports,r),i=!1}finally{i&&delete s[e]}return n.exports}r.ab="//";var a=r(229);e.exports=a}()},5699:function(e,t){"use strict";t.A=void 0;class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken?await this.getToken():null,r=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers||{}}});if(!r.ok){let e=await r.text();throw Error("API error ".concat(r.status,": ").concat(e))}return r.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request("/learners/".concat(e))}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request("/difficulty/proposals/".concat(e.proposalId,"/decision"),{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request("/difficulty/proposals?".concat(t.toString()))}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request("/admin/tenants/".concat(e))}listDistricts(e){return this.request("/admin/tenants/".concat(e,"/districts"))}listSchools(e,t){let s=new URLSearchParams({...t?{districtId:t}:{}}).toString();return this.request("/admin/tenants/".concat(e,"/schools").concat(s?"?".concat(s):""))}listRoleAssignments(e){return this.request("/admin/tenants/".concat(e,"/roles"))}getTodaySession(e,t){let s=new URLSearchParams({learnerId:e,subject:t});return this.request("/sessions/today?".concat(s.toString()))}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request("/sessions/".concat(e.sessionId,"/activities/").concat(e.activityId),{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request("/caregiver/learners/".concat(e,"/overview"))}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request("/caregiver/notifications/".concat(e,"/read"),{method:"POST"})}getLearnerAnalytics(e){return this.request("/analytics/learners/".concat(e))}getTenantAnalytics(e){return this.request("/analytics/tenants/".concat(e))}constructor(e,t){this.baseUrl=e,this.getToken=t}}t.A=s}},function(e){e.O(0,[321,985,744],function(){return e(e.s=1606)}),_N_E=e.O()}]);