(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{9833:function(e,t,s){Promise.resolve().then(s.bind(s,7314))},7314:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(266),n=s(1076),i=s(5699);let a=s(2014).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:4000",o=new i.A(a,async()=>null);function c(){let[e,t]=(0,n.useState)(!1),[s,i]=(0,n.useState)(null),[a,c]=(0,n.useState)(null);return(0,n.useEffect)(()=>{t(!0),i(null),o.getTenantAnalytics("tenant-1").then(e=>c(e)).catch(e=>i(e.message)).finally(()=>t(!1))},[]),(0,r.jsx)("main",{className:"min-h-screen bg-slate-950 text-slate-50 flex items-center justify-center p-6",children:(0,r.jsxs)("section",{className:"w-full max-w-4xl rounded-2xl bg-slate-900/80 border border-slate-800 p-5 space-y-4",children:[(0,r.jsx)("header",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Program Health"}),(0,r.jsx)("p",{className:"text-xs text-slate-300 mt-1",children:"Quick snapshot of how AIVO is being used across your tenant."})]})}),e&&(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"Loading analyticsâ€¦"}),s&&(0,r.jsxs)("p",{className:"text-xs text-red-400",children:["Error: ",s]}),a&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-4",children:[(0,r.jsx)("p",{className:"text-[11px] text-slate-400",children:"Active learners"}),(0,r.jsx)("p",{className:"text-2xl font-semibold mt-1",children:a.learnersCount})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-4",children:[(0,r.jsx)("p",{className:"text-[11px] text-slate-400",children:"Avg minutes practiced"}),(0,r.jsx)("p",{className:"text-2xl font-semibold mt-1",children:a.avgMinutesPracticed.toFixed(1)})]}),(0,r.jsxs)("div",{className:"rounded-xl bg-slate-950/80 border border-slate-800 p-4",children:[(0,r.jsx)("p",{className:"text-[11px] text-slate-400",children:"Avg mastery"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold mt-1",children:[(100*a.avgMasteryScore).toFixed(0),"%"]})]})]}),!e&&!s&&!a&&(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"No analytics data available yet. Once learners start practicing, you'll see a summary here."})]})})}},2014:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(6946)},6946:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{s="function"==typeof clearTimeout?clearTimeout:a}catch(e){s=a}}();var c=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?c=r.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(r=c,c=[];++u<t;)r&&r[u].run();u=-1,t=c.length}r=null,l=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===a||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];c.push(new f(e,t)),1!==c.length||l||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}},a=!0;try{t[e](i,i.exports,r),a=!1}finally{a&&delete s[e]}return i.exports}r.ab="//";var n=r(229);e.exports=n}()},5699:function(e,t){"use strict";t.A=void 0;class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken?await this.getToken():null,r=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers||{}}});if(!r.ok){let e=await r.text();throw Error("API error ".concat(r.status,": ").concat(e))}return r.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request("/learners/".concat(e))}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request("/difficulty/proposals/".concat(e.proposalId,"/decision"),{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request("/difficulty/proposals?".concat(t.toString()))}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request("/admin/tenants/".concat(e))}listDistricts(e){return this.request("/admin/tenants/".concat(e,"/districts"))}listSchools(e,t){let s=new URLSearchParams({...t?{districtId:t}:{}}).toString();return this.request("/admin/tenants/".concat(e,"/schools").concat(s?"?".concat(s):""))}listRoleAssignments(e){return this.request("/admin/tenants/".concat(e,"/roles"))}getTodaySession(e,t){let s=new URLSearchParams({learnerId:e,subject:t});return this.request("/sessions/today?".concat(s.toString()))}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request("/sessions/".concat(e.sessionId,"/activities/").concat(e.activityId),{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request("/caregiver/learners/".concat(e,"/overview"))}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request("/caregiver/notifications/".concat(e,"/read"),{method:"POST"})}getLearnerAnalytics(e){return this.request("/analytics/learners/".concat(e))}getTenantAnalytics(e){return this.request("/analytics/tenants/".concat(e))}constructor(e,t){this.baseUrl=e,this.getToken=t}}t.A=s}},function(e){e.O(0,[321,985,744],function(){return e(e.s=9833)}),_N_E=e.O()}]);