(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{4100:function(e,t,s){Promise.resolve().then(s.bind(s,4193))},4193:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(266),n=s(1076);let i=new(s(5699)).A("http://localhost:4000");function r(){var e,t,s;let[r,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[b,f]=(0,n.useState)(null),[y,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)(null);function N(e){let t="math";if(!e||0===e.length)return t;let s=e[0];return["math","ela"].includes(s)?s:t}async function S(){x(!0),f(null);try{var e,t,s;let a=await i.me();c(a);let n=null!==(s=null===(e=a.learner)||void 0===e?void 0:e.id)&&void 0!==s?s:"demo-learner",r=N(null===(t=a.learner)||void 0===t?void 0:t.subjects),o=await i.getTodaySession(n,r);l(o.session)}catch(e){f(e.message)}finally{x(!1)}}async function w(){h(!0),f(null);try{var e,t,s;let a=null!=o?o:await i.me();o||c(a);let n=null!==(s=null===(e=a.learner)||void 0===e?void 0:e.id)&&void 0!==s?s:"demo-learner",r=N(null===(t=a.learner)||void 0===t?void 0:t.subjects),d=await i.startSession({learnerId:n,subject:r});l(d.session)}catch(e){f(e.message)}finally{h(!1)}}async function k(e,t){if(r){if("in_progress"===t&&"micro_lesson"===e.type){f(null);try{var s,a,n,d,m;let t=null!=o?o:await i.me();o||c(t);let r=null!==(d=null===(s=t.learner)||void 0===s?void 0:s.id)&&void 0!==d?d:"demo-learner",l=(null===(a=t.learner)||void 0===a?void 0:a.subjects)&&t.learner.subjects.length>0?N(t.learner.subjects):e.subject,x=null!==(m=null===(n=t.learner)||void 0===n?void 0:n.region)&&void 0!==m?m:"north_america",{plan:p}=await i.generateLessonPlan({learnerId:r,subject:l,region:x});u(p)}catch(e){f(e.message)}}j(e.id),f(null);try{let s=await i.updateActivityStatus({sessionId:r.id,activityId:e.id,status:t});l(s.session)}catch(e){f(e.message)}finally{j(null)}}}(0,n.useEffect)(()=>{S()},[]);let q=new Date().toLocaleDateString(void 0,{month:"short",day:"numeric",weekday:"short"}),T=(null!==(s=null==o?void 0:null===(t=o.learner)||void 0===t?void 0:null===(e=t.subjects)||void 0===e?void 0:e[0])&&void 0!==s?s:"math").toUpperCase();return(0,a.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50 p-6",children:(0,a.jsxs)("section",{className:"w-full max-w-2xl rounded-2xl bg-slate-900/80 border border-slate-800 shadow-soft-coral p-5 space-y-4",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Today's Calm Session"}),(0,a.jsxs)("p",{className:"text-xs text-slate-300",children:[q," • Subject: ",(0,a.jsx)("span",{className:"font-medium uppercase",children:T})]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!0),className:"rounded-pill border border-slate-700 px-3 py-1.5 text-xs font-semibold text-slate-100 bg-slate-800/60 hover:bg-slate-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-coral focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950",children:"I need a break"})]}),y&&(0,a.jsxs)("div",{className:"rounded-xl bg-emerald-500/10 border border-emerald-500/40 p-3 text-xs text-emerald-100",children:["It's okay to pause. Take a breath, stretch, or get a drink of water. When you're ready, you can come back and continue—your session will wait for you.",(0,a.jsx)("button",{type:"button",className:"ml-2 underline underline-offset-2 text-emerald-200",onClick:()=>g(!1),children:"Got it"})]}),m&&(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"Checking today's plan…"}),b&&(0,a.jsxs)("p",{className:"text-xs text-red-400",children:["Error: ",b]}),!m&&!r&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-slate-200",children:"You don't have a session started yet. We'll create a short, gentle plan for today."}),(0,a.jsx)("button",{type:"button",disabled:p,onClick:w,className:"w-full rounded-pill bg-coral px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:p?"Preparing your calm session…":"Start calm session"})]}),r&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("p",{className:"text-xs text-slate-300",children:["Planned time: ",r.plannedMinutes," minutes • Status: "," ",(0,a.jsx)("span",{className:"font-semibold capitalize",children:r.status})]})}),(0,a.jsx)("ul",{className:"space-y-3",children:r.activities.map(e=>{let t="pending"===e.status||"in_progress"===e.status,s="pending"===e.status?"Not started":"in_progress"===e.status?"In progress":"completed"===e.status?"Done":"Skipped";return(0,a.jsxs)("li",{className:"rounded-xl border p-3 text-xs ".concat(t?"bg-slate-800/80 border-slate-700":"bg-slate-900/60 border-slate-800"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:e.type.replace("_"," ")}),(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-50",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-slate-300",children:e.instructions})]}),(0,a.jsx)("span",{className:"text-[10px] font-semibold rounded-pill px-2 py-0.5 ".concat("completed"===e.status?"bg-emerald-500/20 text-emerald-300":"in_progress"===e.status?"bg-amber-500/20 text-amber-300":"skipped"===e.status?"bg-slate-600/40 text-slate-200":"bg-slate-700/40 text-slate-200"),children:s})]}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-[11px] text-slate-400",children:["~",e.estimatedMinutes," minutes"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&(0,a.jsx)("button",{type:"button",disabled:v===e.id,onClick:()=>k(e,"in_progress"),className:"rounded-pill border border-slate-600 px-3 py-1 text-[11px] text-slate-100 disabled:opacity-60",children:v===e.id?"Starting…":"Start"}),"in_progress"===e.status&&(0,a.jsx)("button",{type:"button",disabled:v===e.id,onClick:()=>k(e,"completed"),className:"rounded-pill bg-coral px-3 py-1 text-[11px] font-semibold text-white disabled:opacity-60",children:v===e.id?"Saving…":"Mark done"})]})]})]},e.id)})}),d&&(0,a.jsxs)("div",{className:"mt-4 rounded-xl bg-slate-900/80 border border-slate-700 p-3 space-y-2",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-50",children:d.title}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-300",children:["Objective: ",d.objective]}),(0,a.jsx)("ul",{className:"mt-2 space-y-2",children:d.blocks.map(e=>(0,a.jsxs)("li",{className:"rounded-lg border border-slate-700 bg-slate-900/70 p-2",children:[(0,a.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-slate-400",children:e.type.replace("_"," ")}),(0,a.jsx)("p",{className:"text-xs font-semibold text-slate-50",children:e.title}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-slate-300",children:e.studentFacingText}),e.example&&(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-slate-200",children:["Example: ",e.example]}),e.practiceQuestion&&(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-slate-200",children:["Try: ",e.practiceQuestion]}),"number"==typeof e.estimatedMinutes&&(0,a.jsxs)("p",{className:"mt-1 text-[10px] text-slate-500",children:["~",e.estimatedMinutes," min"]})]},e.id))})]})]})]})})}},5699:function(e,t){"use strict";t.A=void 0;class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.getToken?await this.getToken():null,a=await fetch("".concat(this.baseUrl).concat(e),{...t,headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{},...t.headers||{}}});if(!a.ok){let e=await a.text();throw Error("API error ".concat(a.status,": ").concat(e))}return a.json()}me(){return this.request("/me")}createLearner(e){return this.request("/learners",{method:"POST",body:JSON.stringify(e)})}getLearner(e){return this.request("/learners/".concat(e))}generateBaseline(e){return this.request("/baseline/generate",{method:"POST",body:JSON.stringify(e)})}submitBaselineResponses(e){return this.request("/baseline/submit",{method:"POST",body:JSON.stringify(e)})}createDifficultyProposal(e){return this.request("/difficulty/proposals",{method:"POST",body:JSON.stringify(e)})}decideOnDifficultyProposal(e){return this.request("/difficulty/proposals/".concat(e.proposalId,"/decision"),{method:"POST",body:JSON.stringify({approve:e.approve,notes:e.notes})})}listDifficultyProposals(e){let t=new URLSearchParams({learnerId:e});return this.request("/difficulty/proposals?".concat(t.toString()))}generateLessonPlan(e){return this.request("/lessons/generate",{method:"POST",body:JSON.stringify(e)})}listTenants(){return this.request("/admin/tenants")}getTenantConfig(e){return this.request("/admin/tenants/".concat(e))}listDistricts(e){return this.request("/admin/tenants/".concat(e,"/districts"))}listSchools(e,t){let s=new URLSearchParams({...t?{districtId:t}:{}}).toString();return this.request("/admin/tenants/".concat(e,"/schools").concat(s?"?".concat(s):""))}listRoleAssignments(e){return this.request("/admin/tenants/".concat(e,"/roles"))}getTodaySession(e,t){let s=new URLSearchParams({learnerId:e,subject:t});return this.request("/sessions/today?".concat(s.toString()))}startSession(e){return this.request("/sessions/start",{method:"POST",body:JSON.stringify(e)})}updateActivityStatus(e){return this.request("/sessions/".concat(e.sessionId,"/activities/").concat(e.activityId),{method:"PATCH",body:JSON.stringify({status:e.status})})}getCaregiverLearnerOverview(e){return this.request("/caregiver/learners/".concat(e,"/overview"))}listNotifications(){return this.request("/caregiver/notifications")}markNotificationRead(e){return this.request("/caregiver/notifications/".concat(e,"/read"),{method:"POST"})}getLearnerAnalytics(e){return this.request("/analytics/learners/".concat(e))}getTenantAnalytics(e){return this.request("/analytics/tenants/".concat(e))}constructor(e,t){this.baseUrl=e,this.getToken=t}}t.A=s}},function(e){e.O(0,[321,985,744],function(){return e(e.s=4100)}),_N_E=e.O()}]);