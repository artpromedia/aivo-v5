@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   Enterprise Dynamic Theming System
   For Neurodiverse Learners (K-12)
   WCAG 2.1 AA Compliant
   ======================================== */

:root {
  color-scheme: light;
  
  /* RGB Color Variables for Tailwind (space-separated for alpha support) */
  --color-primary: 124 58 237;
  --color-primary-light: 167 139 250;
  --color-primary-dark: 109 40 217;
  --color-primary-contrast: 255 255 255;
  --color-secondary: 179 157 219;
  --color-secondary-light: 225 190 231;
  --color-secondary-dark: 126 87 194;
  --color-secondary-contrast: 255 255 255;
  --color-accent: 0 188 212;
  --color-accent-light: 128 222 234;
  --color-accent-dark: 0 151 167;
  --color-background: 15 23 42;
  --color-background-elevated: 30 41 59;
  --color-background-sunken: 2 6 23;
  --color-surface: 30 41 59;
  --color-surface-elevated: 51 65 85;
  --color-border: 51 65 85;
  --color-text: 248 250 252;
  --color-text-secondary: 203 213 225;
  --color-text-muted: 148 163 184;
  --color-text-inverse: 15 23 42;
  --color-success: 110 231 183;
  --color-success-light: 167 243 208;
  --color-success-dark: 5 150 105;
  --color-warning: 252 211 77;
  --color-warning-light: 254 243 199;
  --color-warning-dark: 217 119 6;
  --color-error: 239 68 68;
  --color-error-light: 254 205 211;
  --color-error-dark: 220 38 38;
  --color-info: 125 211 252;
  --color-info-light: 224 242 254;
  --color-info-dark: 2 132 199;

  /* Spacing and Sizing */
  --radius-small: 0.375rem;
  --radius-medium: 0.75rem;
  --radius-large: 1.25rem;
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;
  --transition-fast: 150ms;
  --transition-normal: 200ms;
  --font-family: 'Inter', system-ui, sans-serif;
  --line-height: 1.6;
}

/* K-5 Elementary Theme */
[data-grade-band="k_5"], .theme-k5 {
  --color-primary: 255 138 128;
  --color-primary-light: 255 171 145;
  --color-primary-dark: 239 83 80;
  --color-primary-contrast: 62 39 35;
  --color-secondary: 255 224 130;
  --color-secondary-light: 255 248 225;
  --color-secondary-dark: 255 213 79;
  --color-accent: 165 214 167;
  --color-background: 255 248 231;
  --color-background-elevated: 255 255 255;
  --color-surface: 255 253 248;
  --color-border: 255 228 214;
  --color-text: 62 39 35;
  --color-text-secondary: 93 64 55;
  --color-text-muted: 141 110 99;
  --radius-small: 0.5rem;
  --radius-medium: 1rem;
  --radius-large: 1.5rem;
  --focus-ring-width: 3px;
  --font-family: 'Nunito', 'Comic Neue', system-ui, sans-serif;
}

/* 6-8 Middle School Theme */
[data-grade-band="6_8"], .theme-ms {
  --color-primary: 38 166 154;
  --color-primary-light: 77 182 172;
  --color-primary-dark: 0 137 123;
  --color-primary-contrast: 255 255 255;
  --color-secondary: 179 157 219;
  --color-accent: 79 195 247;
  --color-background: 245 245 245;
  --color-background-elevated: 255 255 255;
  --color-surface: 250 250 250;
  --color-border: 224 224 224;
  --color-text: 55 71 79;
  --color-text-secondary: 84 110 122;
  --color-text-muted: 120 144 156;
}

/* 9-12 High School Theme */
[data-grade-band="9_12"], .theme-hs {
  --color-primary: 63 81 181;
  --color-primary-light: 92 107 192;
  --color-primary-dark: 48 63 159;
  --color-primary-contrast: 255 255 255;
  --color-secondary: 120 144 156;
  --color-accent: 0 188 212;
  --color-background: 255 255 255;
  --color-surface: 250 250 250;
  --color-border: 224 224 224;
  --color-text: 33 33 33;
  --color-text-secondary: 97 97 97;
  --color-text-muted: 117 117 117;
  --radius-small: 0.25rem;
  --radius-medium: 0.5rem;
  --radius-large: 0.75rem;
}

/* High Contrast Mode */
[data-contrast="high"], .high-contrast {
  --color-background: 0 0 0;
  --color-surface: 17 17 17;
  --color-text: 255 255 255;
  --color-border: 255 255 255;
  --focus-ring-width: 3px;
}

/* Dyslexia-Friendly Mode */
[data-font="dyslexic"], .dyslexic-mode {
  --font-family: 'OpenDyslexic', 'Comic Sans MS', cursive;
  --line-height: 1.8;
}

/* Custom base styles */
@layer base {
  html {
    @apply antialiased;
  }
  
  body {
    background: rgb(var(--color-background));
    color: rgb(var(--color-text));
    font-family: var(--font-family);
    line-height: var(--line-height);
    @apply min-h-screen;
  }

  /* Accessible focus states */
  :focus-visible {
    outline: var(--focus-ring-width) solid rgb(var(--color-primary));
    outline-offset: var(--focus-ring-offset);
  }
  
  :focus:not(:focus-visible) {
    outline: none;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}

/* Custom component styles - Now using CSS variables */
@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
    background: rgb(var(--color-primary));
    color: rgb(var(--color-primary-contrast));
  }
  
  .btn-primary:hover {
    background: rgb(var(--color-primary-dark));
  }
  
  .btn-primary:focus {
    --tw-ring-color: rgb(var(--color-primary));
  }
  
  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-lg border px-4 py-2 text-sm font-medium shadow-sm transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
    background: rgb(var(--color-surface));
    border-color: rgb(var(--color-border));
    color: rgb(var(--color-text));
  }
  
  .btn-secondary:hover {
    background: rgb(var(--color-surface-elevated));
  }
  
  .card {
    @apply rounded-xl border p-6 shadow-lg;
    background: rgb(var(--color-surface));
    border-color: rgb(var(--color-border));
  }
  
  .input {
    @apply block w-full rounded-lg border px-4 py-2 focus:outline-none focus:ring-2;
    background: rgb(var(--color-surface));
    border-color: rgb(var(--color-border));
    color: rgb(var(--color-text));
  }
  
  .input::placeholder {
    color: rgb(var(--color-text-muted));
  }
  
  .input:focus {
    border-color: rgb(var(--color-primary));
    --tw-ring-color: rgb(var(--color-primary));
  }

  /* Educational components */
  .edu-card {
    background: rgb(var(--color-surface));
    border-radius: var(--radius-medium);
    padding: 1.5rem;
    border: 1px solid rgb(var(--color-border));
  }

  .edu-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-small);
    font-weight: 600;
    min-height: 44px;
    background: rgb(var(--color-primary));
    color: rgb(var(--color-primary-contrast));
  }
}

/* Custom utility styles */
@layer utilities {
  .text-gradient {
    background: linear-gradient(to right, rgb(var(--color-primary-light)), rgb(var(--color-primary)));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
}
